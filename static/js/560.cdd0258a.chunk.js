"use strict";(self.webpackChunkmanga_translate=self.webpackChunkmanga_translate||[]).push([[560],{7560:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(586),a=t(9439),i=t(429),s=t(6106),c=t(914),o=t(3908),l=t(6428),u=t(2791),d=t(4165),h=t(5861),p=t(3144),m=t(5671),x=t(6924);function f(e){var n={kind:"unknown"};switch(e.problem){case"CONNECTION_ERROR":case"NETWORK_ERROR":n={kind:"cannot-connect",temporary:!0};break;case"TIMEOUT_ERROR":n={kind:"timeout",temporary:!0};break;case"SERVER_ERROR":n={kind:"server",error:e.originalError};break;case"CLIENT_ERROR":switch(e.status){case 401:n={kind:"unauthorized"};break;case 403:n={kind:"forbidden"};break;case 404:n={kind:"not-found"};break;default:n={kind:"rejected"}}break;case"CANCEL_ERROR":n={kind:"cancelled"}}return e.originalError&&(n.error=e.originalError),n}var j=(0,p.Z)((function e(n){var t=this;(0,m.Z)(this,e),this.api=void 0,this.config=void 0,this.post=function(){var e=(0,h.Z)((0,d.Z)().mark((function e(n,r){var a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.post(n,r);case 2:if(!(a=e.sent).ok){e.next=5;break}return e.abrupt("return",{kind:"ok",data:a.data});case 5:return e.abrupt("return",f(a));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.config=n,this.api=(0,x.Ue)(n)})),Z=new j({baseURL:"http://localhost:8000"}),g=t(769),k=t(8686),v=t(184),b=function(e){var n=e.onSelect,t=k.Z.Dragger;return(0,v.jsxs)(t,{height:window.innerHeight-200,name:"file",beforeUpload:function(e){(function(e){return new Promise((function(n,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return n(r.result)},r.onerror=function(e){return t(e)}}))})(e).then((function(e){return n(e)}))},children:[(0,v.jsx)("p",{className:"ant-upload-drag-icon",children:(0,v.jsx)(g.Z,{})}),(0,v.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,v.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})},R="styles_container__yaDan",y="styles_content__Bx-04",C=t(5057),E=t(5581),_=t(4391),T=t(3707),w=function(e){var n,t=e.handleRemove,i=e.data,o=e.onSucces,l=C.Z.useForm(),d=(0,a.Z)(l,1)[0];(0,u.useEffect)((function(){d.setFieldsValue(i.groupText)}),[d,i]);return(0,v.jsxs)(r.Z,{style:{background:"white"},children:[(0,v.jsx)(C.Z,{form:d,layout:"vertical",children:Object.entries(null!==(n=i.groupText)&&void 0!==n?n:{}).map((function(e,n){var t=(0,a.Z)(e,1)[0];return(0,v.jsxs)(s.Z,{gutter:10,align:"middle",children:[(0,v.jsx)(c.Z,{span:2,children:(0,v.jsx)(C.Z.Item,{label:"Select",name:[t,"isTrans"],valuePropName:"checked",children:(0,v.jsx)(E.Z,{})})}),(0,v.jsx)(c.Z,{span:11,children:(0,v.jsx)(C.Z.Item,{label:"Group ".concat(n+1),name:[t,"text"],children:(0,v.jsx)(_.Z,{})})}),(0,v.jsx)(c.Z,{span:11,children:(0,v.jsx)(C.Z.Item,{label:"Translate",name:[t,"textTrans"],children:(0,v.jsx)(_.Z,{})})})]},t)}))}),(0,v.jsxs)(s.Z,{gutter:[10,10],style:{justifyContent:"center"},children:[(0,v.jsx)(c.Z,{children:(0,v.jsx)(T.Z,{danger:!0,type:"primary",onClick:function(){var e={};Object.entries(i.groupText).forEach((function(n){var t=(0,a.Z)(n,2),r=t[0],i=t[1];e[r]=i.locate}));var n={image:i.originImage,location:e};Z.post("/removeText",n).then((function(e){"ok"===e.kind&&o(e.data.image)}))},children:"Remove Text In Comic"})}),(0,v.jsx)(c.Z,{children:(0,v.jsx)(T.Z,{type:"primary",onClick:function(){},children:"Translate Comic"})})]}),(0,v.jsx)(s.Z,{style:{justifyContent:"center",marginTop:10},children:(0,v.jsx)(c.Z,{children:(0,v.jsx)(T.Z,{type:"primary",onClick:t,children:"Remove/Change Image"})})})]})},N="styles_container__CGPZu",I=function(e){var n=e.detectBubble,t=e.handleRemove;return(0,v.jsx)(r.Z,{className:N,children:(0,v.jsxs)(s.Z,{gutter:10,children:[(0,v.jsx)(c.Z,{children:(0,v.jsx)(T.Z,{type:"primary",onClick:n,children:"Detect Bubble"})}),(0,v.jsx)(c.Z,{children:(0,v.jsx)(T.Z,{type:"primary",danger:!0,onClick:t,children:"Remove/Change Image"})})]})})},O=function(){var e=(0,u.useState)(),n=(0,a.Z)(e,2),t=n[0],d=n[1],h=(0,u.useState)(!1),p=(0,a.Z)(h,2),m=p[0],x=p[1],f=(0,u.useState)(),j=(0,a.Z)(f,2),g=j[0],k=j[1];return(0,v.jsxs)(r.Z,{className:R,children:[m?(0,v.jsx)(l.Z,{}):null,(0,v.jsx)(r.Z.Header,{children:"Translate Image"}),(0,v.jsx)(r.Z.Content,{className:y,children:(0,v.jsxs)(s.Z,{gutter:[16,8],children:[(0,v.jsx)(c.Z,{span:10,children:t?(0,v.jsx)(o.Z,{src:t}):(0,v.jsx)(b,{onSelect:function(e){return d(e)}})}),(0,v.jsx)(c.Z,{span:14,children:g?(0,v.jsx)(w,{onSucces:function(e){return d("data:image/jpeg;base64,".concat(e))},data:g,handleRemove:function(){d(void 0),k(void 0)}}):(0,v.jsx)(I,{detectBubble:function(){if(t){x(!0);var e=null===t||void 0===t?void 0:t.toString().split(",")[1];Z.post("/detectBubble",{image:e}).then((function(e){x(!1),"ok"===e.kind&&(k(e.data),d("data:image/jpeg;base64,".concat(e.data.imageDetected)))}))}else i.Z.warn({message:"Image not found",description:"Please select image"})},handleRemove:function(){return d(void 0)}})})]})})]})},S=function(){return(0,v.jsx)(r.Z,{children:(0,v.jsx)(O,{})})}}}]);
//# sourceMappingURL=560.cdd0258a.chunk.js.map