"use strict";(self.webpackChunkmanga_translate=self.webpackChunkmanga_translate||[]).push([[560],{7560:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(586),a=t(9439),i=t(429),s=t(6106),o=t(914),c=t(3908),l=t(6428),u=t(2791),d=t(4165),h=t(5861),p=t(3144),x=t(5671),m=t(6924);function f(e){var n={kind:"unknown"};switch(e.problem){case"CONNECTION_ERROR":case"NETWORK_ERROR":n={kind:"cannot-connect",temporary:!0};break;case"TIMEOUT_ERROR":n={kind:"timeout",temporary:!0};break;case"SERVER_ERROR":n={kind:"server",error:e.originalError};break;case"CLIENT_ERROR":switch(e.status){case 401:n={kind:"unauthorized"};break;case 403:n={kind:"forbidden"};break;case 404:n={kind:"not-found"};break;default:n={kind:"rejected"}}break;case"CANCEL_ERROR":n={kind:"cancelled"}}return e.originalError&&(n.error=e.originalError),n}var g=(0,p.Z)((function e(n){var t=this;(0,x.Z)(this,e),this.api=void 0,this.config=void 0,this.post=function(){var e=(0,h.Z)((0,d.Z)().mark((function e(n,r){var a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.post(n,r);case 2:if(!(a=e.sent).ok){e.next=5;break}return e.abrupt("return",{kind:"ok",data:a.data});case 5:return e.abrupt("return",f(a));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.config=n,this.api=(0,m.Ue)(n)})),j=new g({baseURL:"http://localhost:8000"}),Z=t(769),v=t(8686),k=t(184),b=function(e){var n=e.onSelect,t=v.Z.Dragger;return(0,k.jsxs)(t,{height:window.innerHeight-200,name:"file",beforeUpload:function(e){(function(e){return new Promise((function(n,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return n(r.result)},r.onerror=function(e){return t(e)}}))})(e).then((function(e){return n(e)}))},children:[(0,k.jsx)("p",{className:"ant-upload-drag-icon",children:(0,k.jsx)(Z.Z,{})}),(0,k.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,k.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})},R="styles_container__yaDan",y="styles_content__Bx-04",T=t(5057),C=t(5581),E=t(4391),w=t(3707),_=function(e){var n,t=e.handleRemove,i=e.dataDetect,c=e.onSucces,l=T.Z.useForm(),d=(0,a.Z)(l,1)[0];(0,u.useEffect)((function(){var e,n={};Object.entries(null!==(e=i.groupText)&&void 0!==e?e:{}).forEach((function(e){var t=(0,a.Z)(e,2),r=t[0],i=t[1];n[r]={isTrans:!0,text:i.text,textTrans:"Ti\u1ebfng vi\u1ec7t n\xe8"}})),d.setFieldsValue(n)}),[d,i]);return(0,k.jsxs)(r.Z,{style:{background:"white"},children:[(0,k.jsx)(T.Z,{form:d,layout:"vertical",children:Object.entries(null!==(n=i.groupText)&&void 0!==n?n:{}).map((function(e,n){var t=(0,a.Z)(e,1)[0];return(0,k.jsxs)(s.Z,{gutter:10,align:"middle",children:[(0,k.jsx)(o.Z,{span:2,children:(0,k.jsx)(T.Z.Item,{label:"Select",name:[t,"isTrans"],valuePropName:"checked",children:(0,k.jsx)(C.Z,{})})}),(0,k.jsx)(o.Z,{span:11,children:(0,k.jsx)(T.Z.Item,{label:"Group ".concat(n+1),name:[t,"text"],children:(0,k.jsx)(E.Z,{})})}),(0,k.jsx)(o.Z,{span:11,children:(0,k.jsx)(T.Z.Item,{label:"Translate",name:[t,"textTrans"],children:(0,k.jsx)(E.Z,{})})})]},t)}))}),(0,k.jsxs)(s.Z,{gutter:[10,10],style:{justifyContent:"center"},children:[(0,k.jsx)(o.Z,{children:(0,k.jsx)(w.Z,{danger:!0,type:"primary",onClick:function(){var e=d.getFieldsValue(),n={};Object.entries(e).forEach((function(e){var t=(0,a.Z)(e,2),r=t[0];t[1].isTrans&&(n[r]=i.groupText[r].locate)}));var t={image:i.originImage,location:n};j.post("/removeText",t).then((function(e){"ok"===e.kind&&c(e.data.image)}))},children:"Remove Text In Comic"})}),(0,k.jsx)(o.Z,{children:(0,k.jsx)(w.Z,{type:"primary",onClick:function(){var e=d.getFieldsValue(),n=[];Object.entries(null!==e&&void 0!==e?e:{}).forEach((function(t){var r=(0,a.Z)(t,2),s=r[0];r[1].isTrans&&n.push({textTrans:e[s].textTrans,location:i.groupText[s].locate})}));var t={image:i.originImage,dataTrans:n};j.post("/translateText",t).then((function(e){"ok"===e.kind&&c(e.data.image)}))},children:"Translate Comic"})})]}),(0,k.jsx)(s.Z,{style:{justifyContent:"center",marginTop:10},children:(0,k.jsx)(o.Z,{children:(0,k.jsx)(w.Z,{type:"primary",onClick:t,children:"Remove/Change Image"})})})]})},O="styles_container__CGPZu",I=function(e){var n=e.detectBubble,t=e.handleRemove;return(0,k.jsx)(r.Z,{className:O,children:(0,k.jsxs)(s.Z,{gutter:10,children:[(0,k.jsx)(o.Z,{children:(0,k.jsx)(w.Z,{type:"primary",onClick:n,children:"Detect Bubble"})}),(0,k.jsx)(o.Z,{children:(0,k.jsx)(w.Z,{type:"primary",danger:!0,onClick:t,children:"Remove/Change Image"})})]})})},N=function(){var e=(0,u.useState)(),n=(0,a.Z)(e,2),t=n[0],d=n[1],h=(0,u.useState)(!1),p=(0,a.Z)(h,2),x=p[0],m=p[1],f=(0,u.useState)(),g=(0,a.Z)(f,2),Z=g[0],v=g[1];return(0,k.jsxs)(r.Z,{className:R,children:[x?(0,k.jsx)(l.Z,{}):null,(0,k.jsx)(r.Z.Header,{children:"Translate Image"}),(0,k.jsx)(r.Z.Content,{className:y,children:(0,k.jsxs)(s.Z,{gutter:[16,8],style:{minHeight:window.innerHeight-200},children:[(0,k.jsx)(o.Z,{span:10,children:t?(0,k.jsx)(c.Z,{style:{maxHeight:window.innerHeight-200},src:t}):(0,k.jsx)(b,{onSelect:function(e){return d(e)}})}),(0,k.jsx)(o.Z,{span:14,children:Z?(0,k.jsx)(_,{onSucces:function(e){return d("data:image/jpeg;base64,".concat(e))},dataDetect:Z,handleRemove:function(){d(void 0),v(void 0)}}):(0,k.jsx)(I,{detectBubble:function(){if(t){m(!0);var e=null===t||void 0===t?void 0:t.toString().split(",")[1];j.post("/detectBubble",{image:e}).then((function(e){m(!1),"ok"===e.kind&&(v(e.data),d("data:image/jpeg;base64,".concat(e.data.imageDetected)))}))}else i.Z.warn({message:"Image not found",description:"Please select image"})},handleRemove:function(){return d(void 0)}})})]})})]})},S=function(){return(0,k.jsx)(r.Z,{children:(0,k.jsx)(N,{})})}}}]);
//# sourceMappingURL=560.984cf4a4.chunk.js.map